---
rule_name: 思维链指导文档
rule_key: 思维链,CoT,决策流程,女模数据,状态更新
version: 1
rule_type: 技术规范
rule_type_describe: 为 AI 提供结构化的思维链，指导在每轮对话后如何系统地更新游戏状态和女模数据
filename: COT.md
---

<COT>

# 思维链 (Chain of Thought) 指导文档

本文档为 AI 提供结构化的思维链，指导在每轮对话后如何系统地更新游戏状态和女模数据。

## 核心决策流程

### 第一步：确认互动对象

**问题**：当前是否正在与女模（或有合作机会的女模）进行互动交流？

- **交互对象类型**：
  - 直接对话（面对面、电话、视频通话）
  - 线上沟通（消息、邮件、社交媒体）
  - 任务相关的业务互动
  - 突然遭遇或偶然相遇

- **判断标准**：
  - ✅ **有互动** → 进行到第二步
  - ❌ **无互动** → 结束思维链，保持状态不变

**示例**：

- ✅ "六花走进工作室，与{{user}}讨论拍摄方案" → 有互动
- ❌ "{{user}}一个人在办公室等待客户" → 无互动
- ✅ "{{user}}收到梦瑶的微信消息" → 有互动

---

### 第二步：更新出场女模列表

**规则**：所有正在与{{user}}交流互动的女模（无论是否是当面见面），都要记录到 `世界.出场女模`

**具体操作**：

1. **收集当前互动的所有女模**
   - 在场的女模（直接出现在场景中）
   - 远程交流的女模（电话、视频、消息等）
   - 新出现的女模（首次接触）

2. **更新规则**（⚠️ 必须使用展开式数组格式）

   详见 <plot-log-format-guide />

3. **特殊情况**
   - **首次出现新女模**：需要在第三步完整录入女模数据
   - **多人场景**：列出所有相关女模
   - **远程互动**：同样记录到出场女模列表

**示例**：

```yaml
记下:
  状态栏.世界.出场女模:
    - 六花
    - 梦瑶
```

---

### 第三步：更新女模数据

**目的**：根据本轮剧情对女模的属性进行实时更新

#### 3.1 关键数据字段（优先更新）

| 字段           | 说明                         | 更新触发条件                    |
| -------------- | ---------------------------- | ------------------------------- |
| **想法**       | 女模的内心独白               | 任何情感、态度或计划的变化      |
| **堕落度**     | 道德边界的动摇程度（0-100）  | {{user}} 的诱惑、压力或行为影响 |
| **堕落度描述** | 根据堕落度生成的沉浸式描述   | 堕落度改变时必须同步更新        |
| **好感度**     | 对{{user}}的感受（-100~100） | 互动中产生的好恶变化            |
| **好感度描述** | 关系状态的文字描述           | 好感度改变时必须同步更新        |
| **动情程度**   | 当前的性兴奋程度（0-100）    | 色情/亲密互动场景               |
| **性癖**       | 性偏好和禁忌列表             | 女模表露新的性癖或禁忌          |
| **描述**       | 对女模当前状态的文字描述     | 任何明显的生理或心理变化        |

#### 3.2 数据更新的三个层面

**层面A：情感心理**

- 女模对{{user}}的态度是否改变？
- {{user}}的行为是否触发了女模的情感反应？
- 女模的价值观是否被挑战？

```yaml
调整:
  状态栏.女模.六花.关系.好感度: +10
记下:
  状态栏.女模.六花.关系.好感度描述: "对摄影师产生了一丝好感，觉得他有点意思。"
  状态栏.女模.六花.想法: "他的专业态度让我有点改观，也许他不像传说中那样不堪。"
```

**层面B：道德边界**

- {{user}}的行为是否导致堕落度发生了变化？
- 女模是否接受了之前的底线禁忌？
- 是否产生了新的禁忌或接纳？

```yaml
调整:
  状态栏.女模.梦瑶.关系.堕落度: +15
记下:
  状态栏.女模.梦瑶.关系.堕落度描述: "原则有所松动，开始考虑接受一些边界模糊的工作。"
```

**层面C：性癖变化**

- {{user}}的行为是否导致女模的性癖发生了变化？
- 是否激发了女模之前未知的性癖好？
- 是否触发了新的禁忌？

```yaml
追加:
  状态栏.女模.安娜.性爱.性癖: 温和SM
  状态栏.女模.安娜.性爱.性癖: 口交

记下:
  状态栏.女模.安娜.性爱.动情程度: 45
```

#### 3.3 更新检查清单

在每轮对话后，遍历所有 `出场女模` 中的女模，逐一检查：

- [ ] **想法**：女模的内心独白是否需要更新？
- [ ] **堕落度 & 描述**：{{user}} 的行为是否影响了道德底线？
- [ ] **好感度 & 描述**：互动中产生了什么样的情感变化？
- [ ] **性癖**：是否发现或创造了新的性癖好？
- [ ] **动情程度**：如果有色情/亲密场景，当前兴奋程度是多少？
- [ ] **生理状态**（乳房/小穴/肛门）：如果有性场景，需要详细描述当前状态

---

### 第四步：检查女模退场

**规则**：本轮对话中，是否有女模退场？若有，更新出场女模列表。

**退场条件**：

- 女模离开场景（离开工作室、结束通话、挂断视频）
- 女模任务完成（拍摄结束、沟通结束）
- 突发事件导致女模离开（争执、紧急情况）
- 故事转向不涉及该女模的其他情节

**更新操作**：

```yaml
记下:
  状态栏.世界.出场女模:
    - 保留的女模1
    - 保留的女模2
```

**示例**：

```yaml
# 六花完成了拍摄，梦瑶还在沟通
记下:
  状态栏.世界.出场女模:
    - 梦瑶
```

---

### 第五步：检查拍摄任务更新

**规则**：本轮对话中，是否有拍摄任务状态被更新？

#### 5.1 任务状态值

| 状态       | 说明                     | 何时使用                          |
| ---------- | ------------------------ | --------------------------------- |
| **未开始** | 任务已创建，尚未开始执行 | 任务刚刚被添加或定下              |
| **进行中** | 任务正在进行中           | 已开始拍摄/沟通                   |
| **已完成** | 任务已完成               | 任务达成目标，{{user}} 获得报酬   |
| **已取消** | 任务已被取消             | 女模反悔、{{user}} 放弃或发生意外 |

#### 5.2 任务更新检查

在对话中，检查以下情况：

1.  **是否创建了新任务？**
    - 女模主动提出拍摄需求
    - {{user}} 和女模协商定下拍摄计划
    - 任务需要遵循格式：`模特名--日期时间`（双破折号，不含目标概要）

    ```yaml
    记下:
      状态栏.user.拍摄任务:
        六花--2024-12-28-1430:
          状态: 未开始
          模特: 六花
          目标: 商业写真集
          期限: 2024-12-28 14:30
          报酬: 3000
          特殊要求: 强调气质，展现专业形象
    ```

2.  **是否更新了任务状态？**
    - 任务开始执行 → `未开始` → `进行中`
    - 任务完成或取消 → `进行中` → `已完成`/`已取消`

    ```yaml
    记下:
      状态栏.user.拍摄任务.六花--2024-12-28-1430.状态: 进行中
    ```

3.  **是否需要调整任务细节？**
    - 修改报酬、期限、特殊要求等

    ```yaml
    调整:
      状态栏.user.拍摄任务.六花--2024-12-28-1430.报酬: +500
    记下:
      状态栏.user.拍摄任务.六花--2024-12-28-1430.特殊要求: "增加古装主题"
    ```

4.  **任务是否因故取消？**

    ```yaml
    记下:
      状态栏.user.拍摄任务.六花--2024-12-28-1430.状态: 已取消
    ```

#### 5.3 当前任务参考

在对话中可以通过这个字段了解当前的拍摄任务：

```
当前任务: <tasks>{{getvar::状态栏.user.拍摄任务}}</tasks>
```

---

## 完整流程示例

### 场景：{{user}} 与六花进行第一次面试

#### 对话前的思维链

1. **第一步**：检查是否有互动
   - ✅ 六花走进工作室，与{{user}}进行面试

2. **第二步**：记录出场女模

   ```yaml
   记下:
     状态栏.世界.出场女模:
       - 六花
   ```

3. **第三步**：初始化/更新女模数据
   - 这是首次互动，需要完整录入女模信息

   ```yaml
   记下:
     状态栏.女模.六花.想法: "这就是那个新摄影师？看起来还挺认真的。"
     状态栏.女模.六花.关系.好感度描述: "初次见面，基本持中立态度。"
     状态栏.女模.六花.关系.堕落度描述: "保持职业底线，接受正规拍摄。"
     # ... 其他初始字段
   ```

4. **第四步**：检查退场
   - 还未结束对话，六花未退场

5. **第五步**：检查任务
   - 对话中确定了拍摄计划
   ```yaml
   记下:
     状态栏.user.拍摄任务:
       六花--2024-12-28-1430:
         状态: 未开始
         模特: 六花
         目标: 商业写真集
         期限: 2024-12-28 14:30
         报酬: 2500
         特殊要求: 无
   ```

---

### 场景：拍摄进行中，六花的态度发生变化

#### 对话中识别的变化

- {{user}} 的专业指导让六花印象改善
- 互动中{{user}}的某些行为让六花有所动心

#### 更新决策

1. **第一步**：✅ 有互动（拍摄现场）

2. **第二步**：六花仍在场景中

   ```yaml
   记下:
     状态栏.世界.出场女模:
       - 六花
   ```

3. **第三步**：更新六花的数据

   ```yaml
   调整:
     状态栏.女模.六花.关系.好感度: +20
   记下:
     状态栏.女模.六花.关系.好感度描述: "被摄影师的专业性吸引，产生了一些好感。"
     状态栏.女模.六花.想法: "他的指导很到位，也许之后还能合作。"
   ```

4. **第四步**：六花仍在场景

5. **第五步**：更新任务状态
   ```yaml
   记下:
     状态栏.user.拍摄任务.六花--2024-12-28-1430.状态: 进行中
   ```

---

### 场景：拍摄结束，六花离开

#### 对话中的结束信号

- 拍摄完成
- {{user}} 和六花道别
- 六花离开现场

#### 更新决策

1. **第一步**：✅ 对话中有互动（道别场景）

2. **第二步**：六花正在离场

   ```yaml
   记下:
     状态栏.世界.出场女模: []
   ```

3. **第三步**：最后一次更新六花数据（记录拍摄后的状态）

   ```yaml
   记下:
     状态栏.女模.六花.想法: "这次拍摄真不错，他的专业度远超我预期。"
   ```

4. **第四步**：✅ 六花已退场，出场女模为空

5. **第五步**：更新任务状态为已完成
   ```yaml
   记下:
     状态栏.user.拍摄任务.六花--2024-12-28-1430.状态: 已完成
   ```

---

## 关键注意事项

### ⚠️ 必读规则

0. **🔴 输出格式强制要求（第一优先级）**
   - 每轮对话**必须**包含 `<cot>` 块和 `<plot-log>` 块
   - `<cot>` 块必须在正文**前**，`<plot-log>` 块必须在正文**后**
   - 即使没有数据变化，也要输出这两个块
   - 这是确保游戏状态准确的唯一方式
   - **🔴 关键**：所有 plot-log 输出必须严格遵守 <plot-log-format-guide /> 规范
   - **🔴 强制规则**：输出格式详见 <plot-log-format-guide />

1. **出场女模必须包含**
   - 即使只是远程通话，也要记录到 `出场女模`
   - 不要遗漏任何与{{user}}互动的女模

2. **堕落度和好感度必须配对**
   - 改变数值时，必须同步更新描述
   - 描述要反映女模当前的心理状态

3. **性癖和动情程度的一致性**
   - 如果有性内容出现，必须更新 `动情程度`
   - 根据动情程度更新生理状态（乳房/小穴/肛门）

4. **任务格式严格**
   - key 格式：`模特名--日期-时间`（双破折号分隔，**不包含目标概要**）
   - 日期格式：`yyyy-mm-dd`，时间格式：`HHMM`（例如 `1430` 表示 14:30）
   - 示例：`六花--2024-12-28-1430`

5. **状态变化要有因果**
   - 不要凭空改变女模的属性
   - 每一个数值变化都应该由剧情中的{{user}}行为或对话引发

### 💡 最佳实践

- **粒度适中**：不要每句话都改变好感度，只在有明显触发的地方更新
- **描述详尽**：利用"想法"字段深化女模的个性和反应
- **多女模同时出现**：逐一更新每个女模，不要遗漏任何一个
- **远程互动也重要**：电话、消息等同样需要更新状态和关系

---

## 🔴 强制输出格式要求

**每一轮对话的回复必须包含以下两个块，缺一不可：**

### 1️⃣ `<cot>` 块 - 思维链（强制输出在正文之前）

**位置**：必须在正文前输出
**内容**：逐个回答以下五步决策问题

```
<cot>
## 第一步：互动确认
Q: 当前是否正在与女模（或有合作机会的女模）进行互动交流？
A: [是/否 + 简述]

## 第二步：出场女模列表
Q: 所有当前互动的女模（包括远程）是谁？
A: [列出所有出场女模]

## 第三步：女模数据更新
Q: 这些女模的数据是否需要更新？涉及哪些字段？
A: [列出需要更新的女模和字段]

## 第四步：女模退场
Q: 本轮对话中是否有女模退场？
A: [是/否 + 简述]

## 第五步：拍摄任务
Q: 拍摄任务是否有变化（创建/更新/完成/取消）？
A: [列出所有任务变化]
</cot>
```

**强制规则**：

- ⚠️ **每轮对话都必须包含** `<cot>` 块，即使没有数据更新
- ⚠️ **必须在正文前**，不允许放在后面
- ⚠️ **五步问题都必须回答**，即使答案是"无变化"
- ⚠️ **必须清晰明确**，便于追踪每个决策

### 2️⃣ `<plot-log>` 块 - 状态更新（在正文最后）

**位置**：必须在正文末尾输出
**内容**：按以下优先级输出状态变化

1. **出场女模更新**（如有变化）
2. **女模数据更新**（想法、情感、性癖等）
3. **任务创建/更新**（如有变化）
4. **任务状态更新**（进行/完成等）

```yaml
<plot-log>
记下:
  状态栏.世界.出场女模:
    - 六花
  状态栏.女模.六花.关系.好感度描述: "对摄影师产生了初步好感"

调整:
  状态栏.女模.六花.关系.好感度: +10

记下:
  状态栏.user.拍摄任务.六花--2024-12-28-1430:
    状态: 进行中
</plot-log>
```

**强制规则**：

- ⚠️ **每轮对话都必须包含** `<plot-log>` 块
- ⚠️ **必须在正文末尾**，不允许提前输出
- ⚠️ **即使没有更新也要输出**，使用 `#` 注释说明无变化
- ⚠️ **严格遵守 YAML 格式**

---

## 完整输出示例

```
<cot>
## 第一步：互动确认
Q: 当前是否正在与女模（或有合作机会的女模）进行互动交流？
A: 是，{{user}} 与六花进行了拍摄指导和亲密互动

## 第二步：出场女模列表
Q: 所有当前互动的女模（包括远程）是谁？
A: 六花

## 第三步：女模数据更新
Q: 这些女模的数据是否需要更新？涉及哪些字段？
A: 六花需要更新：想法、关系.好感度、关系.堕落度、性爱.动情程度

## 第四步：女模退场
Q: 本轮对话中是否有女模退场？
A: 否

## 第五步：拍摄任务
Q: 拍摄任务是否有变化（创建/更新/完成/取消）？
A: 是，将六花的任务状态从'未开始'更新为'进行中'
</cot>

[正文内容...拍摄互动、对话等...]

<plot-log>
记下:
  状态栏.世界.出场女模:
    - 六花
  状态栏.女模.六花.想法: 他的指导让我感到被重视，也许这次合作会很有趣
  状态栏.女模.六花.关系.好感度描述: 初步产生好感，愿意配合更多拍摄要求

调整:
  状态栏.女模.六花.关系.好感度: +15
  状态栏.女模.六花.关系.堕落度: +5
  状态栏.女模.六花.性爱.动情程度: +20

记下:
  状态栏.user.拍摄任务.六花--2024-12-28-1430:
    状态: 进行中
    模特: 六花
    目标: 商业写真集拍摄
    期限: 2024-12-28 14:30
    报酬: 5000
    特殊要求: 包含古装和现代风格对比
</plot-log>
```

---

**本文档是 AI 的思维框架，每轮对话都必须遵循此格式输出，确保：**

- ✅ 决策过程清晰可追踪
- ✅ 状态更新准确无误
- ✅ 游戏逻辑一致连贯
- ✅ 女模数据实时同步

</COT>

