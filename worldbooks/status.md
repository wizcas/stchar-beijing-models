---
rule_name: 状态栏系统 (Schema 定义)
rule_key: 状态栏,JSON,数据结构,schema
version: 2
rule_type: 技术规范
rule_type_describe: 定义 status.yaml 的完整数据结构（JSON 格式）。
filename: status.md
---

<status>

# 状态结构 Schema 定义

## 世界 (`状态栏.世界`)

| 字段     | 类型          | 说明                   | 约束                                               |
| -------- | ------------- | ---------------------- | -------------------------------------------------- |
| 时间     | string        | 当前时间               | ISO8601 格式 + 时区，如 `2024-12-16T14:30:00+0800` |
| 地点     | string        | 当前地点               | 格式: `[国家/城市]具体位置`                        |
| 天气     | string        | 天气描述               | 自然语言简述                                       |
| 出场女模 | array(string) | 当前场景中活跃女模名字 | **JSON 数组格式** `["名1", "名2"]`                 |

---

## User (`状态栏.user`)

### 基本字段

| 字段 | 类型   | 说明                 | 约束         |
| ---- | ------ | -------------------- | ------------ |
| 想法 | string | {{user}}的当前想法   | 简洁内心独白 |
| 资金 | number | 可用资金（单位：元） | 初始值自定义 |

### 拍摄任务字段 (`状态栏.user.拍摄任务`)

每个任务的 Key 格式为：`{模特名}--{yyyy-mm-dd}`（注意双破折号）

**重要规则**：同一天，同一个女模**只能有 1 个任务**（同日唯一性约束）

任务对象必须包含以下 7 个字段（更新时必须完整）：

| 字段     | 类型   | 说明                                          |
| -------- | ------ | --------------------------------------------- |
| 发布日期 | string | 任务发布的日期（格式：yyyy-mm-dd）            |
| 状态     | string | 任务状态：未开始/进行中/已完成/已取消         |
| 模特     | string | 模特名字                                      |
| 目标     | string | 拍摄目标/主题                                 |
| 期限     | string | 截止时间（格式：yyyy-mm-dd HH:MM 或笼统描述） |
| 报酬     | number | 支付金额（单位：元）                          |
| 特殊要求 | string | 特殊要求描述或"无"                            |

**示例**（JSON 格式）：

```json
{
  "状态栏.user.拍摄任务.六花--2024-12-28": {
    "发布日期": "2024-12-28",
    "状态": "进行中",
    "模特": "六花",
    "目标": "商业写真集",
    "期限": "2024-12-28 14:30",
    "报酬": 2500,
    "特殊要求": "无"
  }
}
```

### 器材字段 (`状态栏.user.器材`)

| 字段 | 类型          | 说明         |
| ---- | ------------- | ------------ |
| 机身 | array(string) | 相机机身列表 |
| 镜头 | array(string) | 镜头列表     |
| 灯光 | array(string) | 灯光设备列表 |
| 配件 | array(string) | 其他配件列表 |
| 其他 | array(string) | 其他器材列表 |

---

## 推进选项 (`状态栏.推进选项`)

数组类型，每个元素包含以下字段：

| 字段  | 类型   | 说明                       |
| ----- | ------ | -------------------------- |
| emoji | string | 代表选项的表情符号         |
| 选项  | string | 选项文本描述               |
| 方向  | string | 选项属性：`积极` 或 `消极` |

**示例**（JSON 格式，必须包含 4 个选项：2 积极 + 2 消极）：

```json
{
  "状态栏.推进选项": [
    {
      "emoji": "📸",
      "选项": "继续拍摄，争取更好的效果",
      "方向": "积极"
    },
    {
      "emoji": "💬",
      "选项": "和六花深入沟通，了解她的想法",
      "方向": "积极"
    },
    {
      "emoji": "💰",
      "选项": "提高报酬诱惑她接受更大尺度",
      "方向": "消极"
    },
    {
      "emoji": "⏭️",
      "选项": "结束今天的拍摄，改天再来",
      "方向": "消极"
    }
  ]
}
```

---

## 女模 (`状态栏.女模.{角色名}`)

### 完整 Schema 结构

```json
{
  "女模": {
    "{角色名}": {
      "想法": "string",
      "关系": {
        "堕落度": "number",
        "堕落度描述": "string",
        "好感度": "number",
        "好感度描述": "string"
      },
      "外型": {
        "五官": "string",
        "发型": "string",
        "穿搭": "string",
        "身高": "number",
        "体重": "number",
        "胸围": "number",
        "腰围": "number",
        "臀围": "number",
        "罩杯": "string"
      },
      "职业": {
        "类型": ["array(string)"],
        "层级": "string",
        "方向": "string",
        "尺度": "string",
        "人设": ["array(string)"]
      },
      "性爱": {
        "性癖": ["array(string)"],
        "性经验次数": "number",
        "动情程度": "number"
      }
    }
  }
}
```

**注意**：`性爱.乳房`、`性爱.小穴`、`性爱.肛门` 仅在动情程度≥10 时生成

---

## 首次生成女模数据的约束

### 首次出场必须项

新女模初次生成时**必须生成**以下数据：

1. **性爱基础字段**
   - ✅ `性爱.性癖`: 初始为空数组 `[]`（防止刻板假设）
   - ✅ `性爱.性经验次数`: 根据角色职业阶段生成合理初值
     - 新手（0-1年）：0-2次
     - 进阶（1-3年）：3-15次
     - 资深（3年+）：15次以上
   - ✅ `性爱.动情程度`: 初始值为 0

2. **性爱生理字段的生成规则**
   - ❌ **不生成** `乳房`、`小穴`、`肛门` 字段
   - 仅在动情程度≥10 时才追加这些字段

### 禁止项（防止不合理假设）

1. **禁止刻板化陈词滥调**
   - ❌ "私密处粉嫩未经人事"、"胸型圆润挺翘"、"臀部小巧紧致"

2. **禁止矛盾的性倾向**
   - ❌ 新手模特配极端性癖
   - ❌ 初次见面却很熟悉身体
   - ❌ 保守人设配极端性爱倾向

3. **禁止不合理的背景编造**
   - ❌ "初次经验尚未发生但充满好奇"等刻板假设
   - ❌ 与职业身份矛盾的性经历

---

## 历史记录 (`状态栏.历史`)

| 字段 | 类型          | 说明                 |
| ---- | ------------- | -------------------- |
| 女模 | array(string) | 所有出现过的女模名字 |

**操作**：每当新女模首次登场时，必须使用追加操作记录到此

```json
{
  "追加": {
    "状态栏.历史.女模": ["六花"]
  }
}
```

---

## 🔴 强制规则：数值变更必须同时更新关联字段

当以下字段发生变更时，**必须**同时更新对应的关联描述字段。遗漏任何关联字段是严重错误！

### User (用户) 相关

| 变更字段 | 必须同时更新 | 规则 |
|---------|-----------|------|
| `状态栏.user.堕落度` | `状态栏.user.堕落度描述` | 数值变更时，描述必须对应更新 |

**示例**：
```json
// ❌ 错误：只更新数值，遗漏描述
{
  "调整": {
    "状态栏.user.堕落度": "+10"
  }
}

// ✅ 正确：同时更新数值和描述
{
  "调整": {
    "状态栏.user.堕落度": "+10"
  },
  "记下": {
    "状态栏.user.堕落度描述": "逐渐受到诱惑，道德底线动摇"
  }
}
```

### 女模 (模特) 相关

| 变更字段 | 必须同时更新 | 规则 |
|---------|-----------|------|
| `状态栏.女模.{角色名}.关系.堕落度` | `状态栏.女模.{角色名}.关系.堕落度描述` | **必须**同时更新 |
| `状态栏.女模.{角色名}.关系.好感度` | `状态栏.女模.{角色名}.关系.好感度描述` | **必须**同时更新 |
| `状态栏.女模.{角色名}.性爱.动情程度` | `状态栏.女模.{角色名}.性爱.乳房`、`小穴`、`肛门` | 动情程度≥10 时，**必须**同时生成或更新这些字段 |

**综合示例**：
```json
// ❌ 错误示例
{ "调整": { "状态栏.女模.六花.关系.好感度": "+15" } }

// ✅ 正确示例
{
  "调整": {
    "状态栏.女模.六花.关系.好感度": "+15",
    "状态栏.女模.六花.性爱.动情程度": "+15"
  },
  "记下": {
    "状态栏.女模.六花.关系.好感度描述": "对摄影师的专业素养赞赏，产生好感",
    "状态栏.女模.六花.性爱.乳房": "因兴奋而挺立，乳头泛红",
    "状态栏.女模.六花.性爱.小穴": "逐渐湿润，渴望被触碰",
    "状态栏.女模.六花.性爱.肛门": "因紧张而略微收缩"
  }
}
```

### 强制检查清单

- ✅ 更新 user 堕落度 → 必须更新堕落度描述
- ✅ 更新女模好感度 → 必须更新好感度描述
- ✅ 更新女模堕落度 → 必须更新堕落度描述
- ✅ 更新女模动情程度 → 必须更新乳房、小穴、肛门字段
- ❌ 禁止只更新数值，遗漏任何关联字段
- ❌ 禁止生成虚假或通用化的描述（必须贴切当前情境）

---

## 关键注意事项

1. **必须使用 JSON 格式**：所有 plot-log 必须采用 JSON 格式，禁止 YAML 展开式
2. **Schema 必须完全遵守**：不允许新增、删除或修改任何字段结构
3. **完整性检查**：新女模首次出现时必须包含完整结构
4. **任务完整更新**：更新任务时必须包含所有 7 个字段（包括发布日期）
5. **出场女模同步**：确保 `出场女模` 列表与实际场景一致
6. **女模历史记录**：每个新女模必须记录到历史中
7. **性爱数据规则**：首次生成时不包含 `乳房`、`小穴`、`肛门`，仅在动情程度≥10 时追加

</status>
